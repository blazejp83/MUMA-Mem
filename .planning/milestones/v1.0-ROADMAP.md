# Milestone v1.0: MVP

**Status:** ✅ SHIPPED 2026-02-15
**Phases:** 1-5
**Total Plans:** 21

## Overview

Build a multi-user multi-agent memory system for OpenClaw in five phases: lay the storage and embedding foundation, implement the core write/read pipelines with semantic search, add cognitive-science-based activation and forgetting (the key differentiator), layer on multi-agent coordination with visibility controls, and finally add background intelligence with consolidation and CLI tooling.

## Phases

### Phase 1: Foundation

**Goal**: Abstract storage backend (Redis + SQLite), embedding provider interface (local + remote), basic note CRUD, OpenClaw plugin manifest with lifecycle hooks, project scaffolding
**Depends on**: Nothing (first phase)
**Plans**: 5 plans in 3 waves

Plans:

- [x] 01-01: Scaffolding + Core Types + Plugin Manifest (Wave 1)
- [x] 01-02: Embedding Provider (Wave 2, depends: 01)
- [x] 01-03: Redis Storage Backend (Wave 2, depends: 01)
- [x] 01-04: SQLite Storage Backend (Wave 2, depends: 01)
- [x] 01-05: Plugin Shell + Integration (Wave 3, depends: 02, 03, 04)

**Details:**
Complete memory system infrastructure with TypeScript ESM package, embedding providers (local + OpenAI-compatible), dual storage backends (Redis with RediSearch HNSW vector indexing, SQLite with sqlite-vec KNN), and plugin lifecycle integration. Type-safe 22-field Note schema with Zod-validated configuration.

### Phase 2: Core Memory

**Goal**: Full write pipeline (Extract→Construct→Retrieve→Decide→Link→Evolve), read pipeline with semantic search, Zettelkasten note linking, episodic capture hooks, agent memory tools
**Depends on**: Phase 1
**Plans**: 5 plans in 3 waves

Plans:

- [x] 02-01: LLM Provider Implementation (Wave 1)
- [x] 02-02: Read Pipeline (Wave 1, parallel with 01)
- [x] 02-03: Write Pipeline Core Steps (Wave 2, depends: 01)
- [x] 02-04: Note Linking (Wave 2, depends: 01, parallel with 03)
- [x] 02-05: Pipeline Orchestrator + Agent Tools + Hooks (Wave 3, depends: 02, 03, 04)

**Details:**
End-to-end memory pipeline with semantic search, LLM-driven fact extraction, automatic note linking via vector similarity, and 5 agent tools (write, query, forget, pin, set_visibility) with episodic capture hooks. Six-step write pipeline with batched LLM context evolution.

### Phase 3: Intelligence

**Goal**: ACT-R base-level + spreading activation + stochastic noise, Ebbinghaus adaptive half-life forgetting, L1 in-process working memory with promote gate, before_agent_start context injection, session_end promotion
**Depends on**: Phase 2
**Plans**: 3 plans in 2 waves

Plans:

- [x] 03-01: ACT-R Activation + Ebbinghaus Decay Math [TDD] (Wave 1)
- [x] 03-02: Search Pipeline Activation Integration (Wave 2, depends: 01)
- [x] 03-03: Working Memory L1 + Session Hooks (Wave 2, depends: 01)

**Details:**
ACT-R activation scoring with Petrov 2006 hybrid approximation for base-level activation, spreading activation via cosine similarity, stochastic logistic noise, and Ebbinghaus adaptive half-life forgetting. Session-scoped ephemeral L1 store with automatic promotion to persistent L2 based on activation threshold.

### Phase 4: Multi-Agent

**Goal**: Two-axis access model (domain + visibility), four visibility levels, domain-level rules with longest-prefix matching, per-agent memory profiles, cross-agent pub/sub sync, bidirectional filesystem sync
**Depends on**: Phase 3
**Plans**: 4 plans in 2 waves

Plans:

- [x] 04-01: Access Control Logic [TDD] (Wave 1)
- [x] 04-02: Cross-Agent Event Bus (Wave 1, parallel with 01)
- [x] 04-03: Visibility Integration + Transactive Memory + Tools (Wave 2, depends: 01, 02)
- [x] 04-04: Filesystem Sync (Wave 2, depends: 02)

**Details:**
Two-axis access model (domain + visibility levels: open/scoped/private/user-only) with longest-prefix matching for permission gating. Redis pub/sub and SQLite polling event bus. Bidirectional filesystem sync with YAML frontmatter + markdown serialization. Transactive memory index for "who knows what" routing. 10 total agent tools.

### Phase 5: Background Intelligence

**Goal**: Hourly decay sweep (BullMQ scheduled), daily consolidation (cluster→summarize→prune→conflict detect→distill MEMORY.md), CLI subcommands (stats, export, consolidate, conflicts), conflict detection + user resolution
**Depends on**: Phase 4
**Plans**: 4 plans in 2 waves

Plans:

- [x] 05-01: Decay Sweep Daemon (Wave 1)
- [x] 05-02: Consolidation Engine (Wave 1, parallel with 01)
- [x] 05-03: MEMORY.md Distillation + Daily Scheduler (Wave 2, depends: 01, 02)
- [x] 05-04: CLI Commands (Wave 2, depends: 01, 02)

**Details:**
Automated background intelligence with ACT-R decay sweep daemon, greedy single-linkage clustering with union-find for note grouping, 4-type conflict classification with auto-resolution, MEMORY.md distillation by activation level (Active/Background/Consolidated), daily consolidation scheduler, and 4-command CLI (stats, export, consolidate, conflicts) using Node.js built-in parseArgs.

---

## Milestone Summary

**Decimal Phases:**

- None — all phases were integer phases as originally planned

**Key Decisions:**

- Standalone npm package (not OpenClaw fork) — independent release cycle
- Abstract storage backend — Redis primary, SQLite fallback for single-user
- Two-axis visibility model (domain + visibility) — richer than single-axis filtering
- Dedicated LLM config for plugin background processing
- Configurable embeddings with local MiniLM default
- Agent memory profiles keyed by OpenClaw agent ID
- Petrov hybrid threshold at 50 accesses for ACT-R activation
- Greedy single-linkage + union-find clustering for consolidation
- Node.js built-in parseArgs for CLI (zero external dependencies)

**Issues Resolved:**

- Zod v4 factory defaults for nested objects requiring outer .default()
- TS2590 union type complexity in @huggingface/transformers (dynamic import workaround)
- BigInt rowid required for sqlite-vec bindings in better-sqlite3
- Float32Array serialization in JSON export (placeholder with dimensions)

**Issues Deferred:**

- None — all requirements addressed in v1.0

**Technical Debt Incurred:**

- Plugin API typed as `any` to avoid hard dependency on openclaw/plugin-sdk at runtime
- 3x overfetch for sqlite-vec KNN with per-user filtering (vec_notes lacks user_id column)
- memory.consolidate tool was a Phase 5 placeholder in Phase 4 (now implemented)

---

_For current project status, see .planning/ROADMAP.md_
